(()=>{"use strict";const e={gbp:"£",eur:"€",usd:"$"},t="buy-block_stickTop",n="buy-block_mini",s="buy-block_stickBottom",i="header_stick",c="product-card__container-options_hidden",r=document.querySelector(".header"),o=document.querySelector(".buy-block"),d=document.querySelector(".currency"),a=document.querySelector(".product-card__device_mini"),l=document.querySelector(".product-card__old-price"),p=document.querySelector(".product-card__new-price"),u=document.querySelector(".product-card__devices"),_=(document.querySelector(".product-card__container-devices"),document.querySelector(".product-card__inner-container-devices")),h=JSON.parse('[{"device":"1 Device","year":"1 Year","price":27.99},{"device":"1 Device","year":"2 Years","price":43.99},{"device":"3 Devices","year":"1 Year","price":35.99},{"device":"3 Devices","year":"2 Years","price":63.99},{"device":"5 Devices","year":"1 Year","price":43.99},{"device":"5 Devices","year":"2 Years","price":71.99}]'),m=JSON.parse('{"usd":1.28,"gbp":1,"eur":1.19}');let v=0,E="gbp";function L(){return e[E]}function y(){u.innerHTML="",h.forEach((e=>{const t=document.createElement("option"),n=function(e,t=E){return e*m[t]}(e.price).toFixed(2);t.value=n,t.text=`${e.device} ${e.year} ${L()}${n}`,u.add(t)}))}function g(){!function(e){let[t,n]=e.split(".");l.textContent=L()+t,l.appendChild(x(n));let[s,i]=(e=>(.8*e).toFixed(2))(e).split(".");p.textContent=L()+s,p.appendChild(x(i))}(u.options[devices.selectedIndex].value)}function x(e){let t=document.createElement("span");return t.className="product-card__cents",t.innerText=`.${e}`,t}function C(){window.innerWidth>1440?(o.classList.remove(n),o.classList.remove(s),o.classList.add(t)):(o.style.top="",o.classList.remove(t),o.offsetTop<scrollY?(o.classList.add(n),o.classList.add(s),a.textContent=" - "+k.getSelected()):(o.classList.remove(n),o.classList.remove(s))),v>scrollY?(r.classList.add(i),window.innerWidth>1440&&(o.style.top="104px")):(r.classList.remove(i),window.innerWidth>1440&&(o.style.top="40px")),v=scrollY}window.addEventListener("scroll",C),window.addEventListener("resize",C),d.addEventListener("change",(function(e){E=e.target.value,y(),g(),k.update()})),o.addEventListener("click",(()=>o.classList.remove(n))),y(),g();const k=new class{constructor(e){this._selectElement=document.createElement("div"),this._containerOptions=document.createElement("div"),this._setPrice=e}generate(){this._selectElement.className="product-card__selected-device",this._setFirstElementValue(),this._containerOptions.className="product-card__container-options",this._containerOptions.classList.add(c),this.update(),this._setEventListeners()}_setFirstElementValue(){this._selectElement.innerHTML="";const e=u.options[u.selectedIndex].text;this._selectElement.textContent=e.slice(0,-7)}_handleOptionCLick(e){const t=e.target.dataset.index;u.options[t].selected=!0,this._close()}_createOptionElement(e,t){const n=document.createElement("div");return n.className="product-card__device",n.textContent=e.innerHTML,n.setAttribute("data-index",t),n.addEventListener("click",(e=>{this._handleOptionCLick(e),this.update(),this._setPrice()})),n}update(){this.options=[],this._setFirstElementValue(),this._containerOptions.innerHTML="";for(let e=0;e<u.options.length;e++)this.options.push(this._createOptionElement(u.options[e],e));this._render()}_render(){_.appendChild(this._selectElement),_.appendChild(this._containerOptions),this.options.forEach((e=>this._containerOptions.appendChild(e)))}_setEventListeners(){this._selectElement.addEventListener("click",(()=>this._toggle())),document.addEventListener("click",(e=>this._handleClick(e)))}_close(){this._containerOptions.classList.add(c)}_handleClick(e){this._selectElement.contains(e.target)||this._close()}_toggle(){this._containerOptions.classList.toggle(c)}getSelected(){return console.log(this._selectElement.textContent),this._selectElement.textContent}}((()=>g()));k.generate()})();